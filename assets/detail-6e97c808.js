import{c as V,d as W,v as C,aE as _e,y as he,p as U,a as s,w as Q,T as A,ai as we,aj as ve,Q as ge,b as H,n as ye,V as Be,m as ke,x as oe,S as ae,aa as be,R as Ce,aF as xe,aG as j,as as Se,aH as Te,aI as Oe,a6 as Pe,ac as Ae,_ as Ie,u as De,ae as Ke,aJ as Ne,aK as $e,aL as Ee,k as He,I as Le,o as _,e as y,h as i,l as D,i as K,f as d,t as S,ah as q,aM as N,F as J,aN as X,aO as Y,aP as Re,r as Fe,aC as Me,aD as qe}from"./index-021851cb.js";import{B as L}from"./index-f1a030fb.js";import{A as Ue}from"./index-375ac9ee.js";import{D as ze,C as Ve}from"./CommentList-efbf47bd.js";import{a as We}from"./index-c3e27b4b.js";import{E as Qe}from"./index-31a8a30e.js";import{S as Ge,a as je}from"./index-265a5c64.js";/* empty css              *//* empty css              */import{H as Je}from"./request-2dd4c383.js";import{a as Xe,p as Ye,g as Ze,P as se,m as et,f as tt,d as Z,s as nt,h as ee}from"./function-call-4f99f67f.js";import"./index-0aee9122.js";import"./use-id-0e83a702.js";const[ie,te]=V("action-bar"),le=Symbol(ie),ot={placeholder:Boolean,safeAreaInsetBottom:U};var at=W({name:ie,props:ot,setup(e,{slots:c}){const o=C(),t=_e(o,te),{linkChildren:n}=he(le);n();const h=()=>{var f;return s("div",{ref:o,class:[te(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(f=c.default)==null?void 0:f.call(c)])};return()=>e.placeholder?t(h):h()}});const st=Q(at),[it,lt]=V("action-bar-button"),ct=A({},we,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var rt=W({name:it,props:ct,setup(e,{slots:c}){const o=ve(),{parent:t,index:n}=ge(le),h=H(()=>{if(t){const r=t.children[n.value-1];return!(r&&"isButton"in r)}}),f=H(()=>{if(t){const r=t.children[n.value+1];return!(r&&"isButton"in r)}});return Xe({isButton:!0}),()=>{const{type:r,icon:w,text:u,color:k,loading:b,disabled:T}=e;return s(L,{class:lt([r,{last:f.value,first:h.value}]),size:"large",type:r,icon:w,color:k,loading:b,disabled:T,onClick:o},{default:()=>[c.default?c.default():u]})}}});const ne=Q(rt),[dt,v,$]=V("dialog"),ut=A({},Ye,{title:String,theme:String,width:ye,message:[String,Function],callback:Function,allowHtml:Boolean,className:Be,transition:ke("van-dialog-bounce"),messageAlign:String,closeOnPopstate:U,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:U,closeOnClickOverlay:Boolean}),mt=[...Ze,"transition","closeOnPopstate"];var ce=W({name:dt,props:ut,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:c,slots:o}){const t=C(),n=oe({confirm:!1,cancel:!1}),h=a=>c("update:show",a),f=a=>{var m;h(!1),(m=e.callback)==null||m.call(e,a)},r=a=>()=>{e.show&&(c(a),e.beforeClose?(n[a]=!0,Pe(e.beforeClose,{args:[a],done(){f(a),n[a]=!1},canceled(){n[a]=!1}})):f(a))},w=r("cancel"),u=r("confirm"),k=xe(a=>{var m,p;if(a.target!==((p=(m=t.value)==null?void 0:m.popupRef)==null?void 0:p.value))return;({Enter:e.showConfirmButton?u:j,Escape:e.showCancelButton?w:j})[a.key](),c("keydown",a)},["enter","esc"]),b=()=>{const a=o.title?o.title():e.title;if(a)return s("div",{class:v("header",{isolated:!e.message&&!o.default})},[a])},T=a=>{const{message:m,allowHtml:p,messageAlign:l}=e,B=v("message",{"has-title":a,[l]:l}),O=Se(m)?m():m;return p&&typeof O=="string"?s("div",{class:B,innerHTML:O},null):s("div",{class:B},[O])},x=()=>{if(o.default)return s("div",{class:v("content")},[o.default()]);const{title:a,message:m,allowHtml:p}=e;if(m){const l=!!(a||o.title);return s("div",{key:p?1:0,class:v("content",{isolated:!l})},[T(l)])}},F=()=>s("div",{class:[Oe,v("footer")]},[e.showCancelButton&&s(L,{size:"large",text:e.cancelButtonText||$("cancel"),class:v("cancel"),style:{color:e.cancelButtonColor},loading:n.cancel,disabled:e.cancelButtonDisabled,onClick:w},null),e.showConfirmButton&&s(L,{size:"large",text:e.confirmButtonText||$("confirm"),class:[v("confirm"),{[Te]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:n.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]),I=()=>s(st,{class:v("footer")},{default:()=>[e.showCancelButton&&s(ne,{type:"warning",text:e.cancelButtonText||$("cancel"),class:v("cancel"),color:e.cancelButtonColor,loading:n.cancel,disabled:e.cancelButtonDisabled,onClick:w},null),e.showConfirmButton&&s(ne,{type:"danger",text:e.confirmButtonText||$("confirm"),class:v("confirm"),color:e.confirmButtonColor,loading:n.confirm,disabled:e.confirmButtonDisabled,onClick:u},null)]}),M=()=>o.footer?o.footer():e.theme==="round-button"?I():F();return()=>{const{width:a,title:m,theme:p,message:l,className:B}=e;return s(se,ae({ref:t,role:"dialog",class:[v([p]),B],style:{width:Ce(a)},tabindex:0,"aria-labelledby":m||l,onKeydown:k,"onUpdate:show":h},be(e,mt)),{default:()=>[b(),x(),M()]})}}});let z;const ft={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let pt=A({},ft);function _t(){({instance:z}=et({setup(){const{state:c,toggle:o}=tt();return()=>s(ce,ae(c,{"onUpdate:show":o}),null)}}))}function ht(e){return Ae?new Promise((c,o)=>{z||_t(),z.open(A({},pt,e,{callback:t=>{(t==="confirm"?c:o)(t)}}))}):Promise.resolve()}const wt=e=>ht(A({showCancelButton:!0},e));Q(ce);function vt(e,c){let o=`景德镇市${c.name}`;var t=c.lng,n=c.lat;if(e=="gd")E().android?window.location.href="androidamap://viewMap?sourceApplication=appname&poiname="+o+"&lat="+n+"&lon="+t:E().ios&&(window.location.href="iosamap://viewMap?sourceApplication=appname&poiname="+o+"&lat="+n+"&lon="+t+"&dev=0"),setTimeout(function(){let f=window.document.hidden||window.document.mozHidden||window.document.msHidden||window.document.webkitHidden;(typeof f>"u"||f==!1)&&(window.location.href="https://uri.amap.com/marker?position="+t+","+n+"&name="+o)},2e3);else if(e=="bd"){E().android&&(window.location.href="baidumap://map/marker?content="+o+"&lat="+n+"&lon="+t),E().ios&&(window.location.href="iosbaidumap://map/marker?content="+o+"&lat="+n+"&lon="+t);let r=new Date().getTime();var h=setInterval(function(){var w=new Date,u=w.getTime();u-r<3e3&&u-r>2e3&&(window.location.href=`http://api.map.baidu.com/geocoder?address=${o}&output=html`),u-r>=3e3&&clearInterval(h)},1e3)}}function E(){var e=navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")==-1,weixin:e.indexOf("MicroMessenger")>-1,qq:e.match(/\sQQ/i)==" qq",isBaidu:e.indexOf("baiduboxapp")!==-1,isqqBrowser:e.indexOf("mqqbrowser")!==-1,isWxBrowser:e.indexOf("micromessenger")!==-1,isUc:e.indexOf("ucbrowser")!==-1}}const R=e=>(Me("data-v-ccb12870"),e=e(),qe(),e),gt={class:"detail-page"},yt=["src","alt"],Bt={key:3,class:"detail-container"},kt={class:"detail-info"},bt={class:"detail-info__title"},Ct={class:"detail-info__address"},xt={class:"detail-info__cost"},St={key:0},Tt={key:1,class:"detail-info__cost__money"},Ot={class:"detail-info__action"},Pt=R(()=>d("p",null,"地图",-1)),At=["href"],It=R(()=>d("p",null,"电话",-1)),Dt={class:"detail-info"},Kt=R(()=>d("p",{class:"wy-title"},"介绍",-1)),Nt={class:"detail-info__intor"},$t=R(()=>d("p",null,"查看更多",-1)),Et=[$t],Ht={key:1},Lt={style:{"text-indent":"2em"}},Rt={class:"detail-info"},Ft={__name:"detail",setup(e){const c=De(),o=Ke();let t=oe({}),n=C(!1),h=C(!0),f=C([]);const{name:r,dataType:w}=o.query;Ne(async()=>{Z(),nt({message:"加载中...",duration:0,loadingType:"spinner"}),t=await $e({tableName:w,key:"key",value:r})||{};const l=await Ee(r),{data:B}=await Je.get("/commend");f.value=l.concat(B),h.value=!1,Z()});const u=He(),k=H(()=>u.userInfo?u.userInfo.likes.includes(t.key):!1),b=H(()=>u[w]?u[w].find(l=>l.key===r).images:[]),T=[{name:"高德地图",type:"gd"},{name:"百度地图",type:"bd"}],x=C(!1),F=p=>{vt(p.type,t)},I=C("phoneCall"),M=()=>{wt({message:`确定拨打电话?
${t.phone}`,showCancelButton:!0}).then(()=>{I.value.click()})},a=()=>{if(!Y()){ee("请去我的页面进行登录或注册");return}c.push(`/page?areaKey=${t.key}&areaName=${t.name}&dataType=${t.dataType}`)},m=()=>{if(!Y()){ee("请去我的页面进行登录或注册");return}Re("likes",{areaKey:t.key,value:!k.value,id:t.id,tableName:t.dataType,userid:u.userInfo.userid})};return(p,l)=>{var G;const B=Ge,O=je,re=Qe,de=We,P=Le,ue=ze,me=Ue,fe=se,pe=L;return _(),y("div",gt,[i(b)&&i(b).length?(_(),D(O,{key:0,class:"home-swipe","lazy-render":"",autoplay:"3000"},{default:K(()=>[(_(!0),y(J,null,Fe(i(b),g=>(_(),D(B,{key:g.name},{default:K(()=>[d("img",{class:"home-swipe__image",src:g,alt:g.name},null,8,yt)]),_:2},1024))),128))]),_:1})):(_(),D(re,{key:1,description:"暂无图片"})),i(h)?(_(),D(de,{key:2,title:"",row:3})):(_(),y("div",Bt,[d("div",kt,[d("div",bt,[d("p",null,S(i(t).name),1),s(P,{onClick:m,name:i(k)?"like":"like-o",color:i(k)?"red":"inherit"},null,8,["name","color"])]),s(ue),d("div",Ct,[d("div",null,[d("p",null,S(i(t).address),1),d("div",xt,[i(t).openTime?(_(),y("p",St,[s(P,{name:"clock-o"}),q(S(i(t).openTime),1)])):N("",!0),i(t).cost?(_(),y("p",Tt,[s(P,{name:"cash-o"}),q(S(i(t).cost),1)])):N("",!0)])]),d("div",Ot,[d("div",{onClick:l[0]||(l[0]=g=>x.value=!x.value)},[s(P,{name:"location-o",size:"0.5rem"}),Pt]),i(t).phone?(_(),y("div",{key:0,onClick:M},[d("a",{href:`tel:${i(t).phone}`,ref_key:"phoneCall",ref:I,style:{display:"none"}},null,8,At),s(P,{name:"phone-o",size:"0.5rem"}),It])):N("",!0)])]),s(me,{show:x.value,"onUpdate:show":l[1]||(l[1]=g=>x.value=g),actions:T,onSelect:F},null,8,["show"])]),d("div",Dt,[Kt,i(t).introduction?(_(),y(J,{key:0},[d("p",Nt,S(((G=i(t).introduction)==null?void 0:G.slice(0,50))+"..."),1),i(t).introduction.length>50?(_(),y("div",{key:0,class:"detail-info__showmore",onClick:l[2]||(l[2]=g=>X(n)?n.value=!i(n):n=!i(n))},Et)):N("",!0)],64)):(_(),y("p",Ht,"暂无")),s(fe,{show:i(n),"onUpdate:show":l[3]||(l[3]=g=>X(n)?n.value=g:n=g),round:"",position:"bottom",style:{height:"50%",padding:"20px"}},{default:K(()=>[d("p",Lt,S(i(t).introduction),1)]),_:1},8,["show"])]),d("div",Rt,[s(pe,{onClick:a,type:"primary",block:"",size:"small",round:""},{default:K(()=>[q("去留言")]),_:1}),s(Ve,{datalist:i(f)},null,8,["datalist"])])]))])}}},en=Ie(Ft,[["__scopeId","data-v-ccb12870"]]);export{en as default};
