import{T as O,U as X,c as E,a as c,d as _,b as H,g as ie,n as w,m as I,R as re,w as N,p as P,V as A,v as y,W as ue,H as F,J as de,z as p,X as fe,O as V,K as G,Y as Z,Z as ve,$ as R,a0 as W,a1 as q,N as ye,D as J,E as me,a2 as he,a3 as ge,a4 as Ce,F as ke,a5 as we,a6 as Oe,S as $,a7 as Se,I as Q,a8 as Ie,a9 as be,aa as xe,ab as Pe,x as pe,ac as ze,ad as Te}from"./index-002d2008.js";function ee(e){const t=X();t&&O(t.proxy,e)}const[Be,B]=E("loading"),Le=Array(12).fill(null).map((e,t)=>c("i",{class:B("line",String(t+1))},null)),Ae=c("svg",{class:B("circular"),viewBox:"25 25 50 50"},[c("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Ee={size:w,type:I("circular"),color:String,vertical:Boolean,textSize:w,textColor:String};var _e=_({name:Be,props:Ee,setup(e,{slots:t}){const n=H(()=>O({color:e.color},ie(e.size))),l=()=>{const a=e.type==="spinner"?Le:Ae;return c("span",{class:B("spinner",e.type),style:n.value},[t.icon?t.icon():a])},o=()=>{var a;if(t.default)return c("span",{class:B("text"),style:{fontSize:re(e.textSize),color:(a=e.textColor)!=null?a:e.color}},[t.default()])};return()=>{const{type:a,vertical:s}=e;return c("div",{class:B([a,{vertical:s}]),"aria-live":"polite","aria-busy":!0},[l(),o()])}}});const De=N(_e),te={show:Boolean,zIndex:w,overlay:P,duration:w,teleport:[String,Object],lockScroll:P,lazyRender:P,beforeClose:Function,overlayStyle:Object,overlayClass:A,transitionAppear:Boolean,closeOnClickOverlay:P},it=Object.keys(te);function Ne(e,t){return e>t?"horizontal":t>e?"vertical":""}function Re(){const e=y(0),t=y(0),n=y(0),l=y(0),o=y(0),a=y(0),s=y(""),d=()=>s.value==="vertical",h=()=>s.value==="horizontal",f=()=>{n.value=0,l.value=0,o.value=0,a.value=0,s.value=""};return{move:i=>{const v=i.touches[0];n.value=(v.clientX<0?0:v.clientX)-e.value,l.value=v.clientY-t.value,o.value=Math.abs(n.value),a.value=Math.abs(l.value);const g=10;(!s.value||o.value<g&&a.value<g)&&(s.value=Ne(o.value,a.value))},start:i=>{f(),e.value=i.touches[0].clientX,t.value=i.touches[0].clientY},reset:f,startX:e,startY:t,deltaX:n,deltaY:l,offsetX:o,offsetY:a,direction:s,isVertical:d,isHorizontal:h}}let z=0;const K="van-overflow-hidden";function $e(e,t){const n=Re(),l="01",o="10",a=m=>{n.move(m);const r=n.deltaY.value>0?o:l,i=fe(m.target,e.value),{scrollHeight:v,offsetHeight:g,scrollTop:b}=i;let S="11";b===0?S=g>=v?"00":"01":b+g>=v&&(S="10"),S!=="11"&&n.isVertical()&&!(parseInt(S,2)&parseInt(r,2))&&V(m,!0)},s=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",a,{passive:!1}),z||document.body.classList.add(K),z++},d=()=>{z&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",a),z--,z||document.body.classList.remove(K))},h=()=>t()&&s(),f=()=>t()&&d();ue(h),F(f),de(f),p(t,m=>{m?s():d()})}function ne(e){const t=y(!1);return p(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[Me,Ye]=E("overlay"),Ke={show:Boolean,zIndex:w,duration:w,className:A,lockScroll:P,lazyRender:P,customStyle:Object};var Ue=_({name:Me,props:Ke,setup(e,{slots:t}){const n=y(),l=ne(()=>e.show||!e.lazyRender),o=s=>{e.lockScroll&&V(s,!0)},a=l(()=>{var s;const d=O(ve(e.zIndex),e.customStyle);return R(e.duration)&&(d.animationDuration=`${e.duration}s`),W(c("div",{ref:n,style:d,class:[Ye(),e.className]},[(s=t.default)==null?void 0:s.call(t)]),[[q,e.show]])});return G("touchmove",o,{target:n}),()=>c(Z,{name:"van-fade",appear:!0},{default:a})}});const je=N(Ue),Xe=O({},te,{round:Boolean,position:I("center"),closeIcon:I("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:I("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[He,U]=E("popup");var Fe=_({name:He,inheritAttrs:!1,props:Xe,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:l}){let o,a;const s=y(),d=y(),h=ne(()=>e.show||!e.lazyRender),f=H(()=>{const u={zIndex:s.value};if(R(e.duration)){const C=e.position==="center"?"animationDuration":"transitionDuration";u[C]=`${e.duration}s`}return u}),m=()=>{o||(o=!0,s.value=e.zIndex!==void 0?+e.zIndex:we(),t("open"))},r=()=>{o&&Oe(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},i=u=>{t("clickOverlay",u),e.closeOnClickOverlay&&r()},v=()=>{if(e.overlay)return c(je,{show:e.show,class:e.overlayClass,zIndex:s.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:i},{default:l["overlay-content"]})},g=u=>{t("clickCloseIcon",u),r()},b=()=>{if(e.closeable)return c(Q,{role:"button",tabindex:0,name:e.closeIcon,class:[U("close-icon",e.closeIconPosition),Se],classPrefix:e.iconPrefix,onClick:g},null)},S=()=>t("opened"),ae=()=>t("closed"),se=u=>t("keydown",u),le=h(()=>{var u;const{round:C,position:L,safeAreaInsetTop:D,safeAreaInsetBottom:ce}=e;return W(c("div",$({ref:d,style:f.value,role:"dialog",tabindex:0,class:[U({round:C,[L]:L}),{"van-safe-area-top":D,"van-safe-area-bottom":ce}],onKeydown:se},n),[(u=l.default)==null?void 0:u.call(l),b()]),[[q,e.show]])}),Y=()=>{const{position:u,transition:C,transitionAppear:L}=e,D=u==="center"?"van-fade":`van-popup-slide-${u}`;return c(Z,{name:C||D,appear:L,onAfterEnter:S,onAfterLeave:ae},{default:le})};return p(()=>e.show,u=>{u&&!o&&(m(),n.tabindex===0&&ye(()=>{var C;(C=d.value)==null||C.focus()})),!u&&o&&(o=!1,t("close"))}),ee({popupRef:d}),$e(d,()=>e.show&&e.lockScroll),G("popstate",()=>{e.closeOnPopstate&&(r(),a=!1)}),J(()=>{e.show&&m()}),me(()=>{a&&(t("update:show",!0),a=!1)}),F(()=>{e.show&&e.teleport&&(r(),a=!0)}),he(ge,()=>e.show),()=>e.teleport?c(Ce,{to:e.teleport},{default:()=>[v(),Y()]}):c(ke,null,[v(),Y()])}});const Ve=N(Fe);let T=0;function Ge(e){e?(T||document.body.classList.add("van-toast--unclickable"),T++):T&&(T--,T||document.body.classList.remove("van-toast--unclickable"))}const[Ze,x]=E("toast"),We=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],qe={icon:String,show:Boolean,type:I("text"),overlay:Boolean,message:w,iconSize:w,duration:Ie(2e3),position:I("middle"),teleport:[String,Object],wordBreak:String,className:A,iconPrefix:String,transition:I("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:A,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var Je=_({name:Ze,props:qe,emits:["update:show"],setup(e,{emit:t,slots:n}){let l,o=!1;const a=()=>{const r=e.show&&e.forbidClick;o!==r&&(o=r,Ge(o))},s=r=>t("update:show",r),d=()=>{e.closeOnClick&&s(!1)},h=()=>clearTimeout(l),f=()=>{const{icon:r,type:i,iconSize:v,iconPrefix:g,loadingType:b}=e;if(r||i==="success"||i==="fail")return c(Q,{name:r||i,size:v,class:x("icon"),classPrefix:g},null);if(i==="loading")return c(De,{class:x("loading"),size:v,type:b},null)},m=()=>{const{type:r,message:i}=e;if(n.message)return c("div",{class:x("text")},[n.message()]);if(R(i)&&i!=="")return r==="html"?c("div",{key:0,class:x("text"),innerHTML:String(i)},null):c("div",{class:x("text")},[i])};return p(()=>[e.show,e.forbidClick],a),p(()=>[e.show,e.type,e.message,e.duration],()=>{h(),e.show&&e.duration>0&&(l=setTimeout(()=>{s(!1)},e.duration))}),J(a),be(a),()=>c(Ve,$({class:[x([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:d,onClosed:h,"onUpdate:show":s},xe(e,We)),{default:()=>[f(),m()]})}});function Qe(){const e=pe({show:!1}),t=o=>{e.show=o},n=o=>{O(e,o,{transitionAppear:!0}),t(!0)},l=()=>t(!1);return ee({open:n,close:l,toggle:t}),{open:n,close:l,state:e,toggle:t}}function et(e){const t=Pe(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const tt={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let k=[],nt=!1,j=O({},tt);const ot=new Map;function oe(e){return Te(e)?e:{message:e}}function at(){const{instance:e,unmount:t}=et({setup(){const n=y(""),{open:l,state:o,close:a,toggle:s}=Qe(),d=()=>{},h=()=>c(Je,$(o,{onClosed:d,"onUpdate:show":s}),null);return p(n,f=>{o.message=f}),X().render=h,{open:l,close:a,message:n}}});return e}function st(){if(!k.length||nt){const e=at();k.push(e)}return k[k.length-1]}function lt(e={}){if(!ze)return{};const t=st(),n=oe(e);return t.open(O({},j,ot.get(n.type||j.type),n)),t}const M=e=>t=>lt(O({type:e},oe(t))),rt=M("loading"),ut=M("success"),dt=M("fail"),ft=e=>{k.length&&(e?(k.forEach(t=>{t.close()}),k=[]):k[0].close())};export{De as L,Ve as P,ee as a,Je as b,lt as c,ft as d,ut as e,Qe as f,it as g,dt as h,et as m,te as p,rt as s,Re as u};
